# ENS Resolver Cache Browser

A comprehensive interactive browser for exploring the `resolver-cache.json` file generated by the ENS prober tools.

## Features

- **Interactive Mode**: Full-featured command-line interface for browsing cache data
- **Quick Commands**: Non-interactive commands for scripting and automation
- **Search Functionality**: Find domains by name with partial matching
- **Statistical Analysis**: Comprehensive statistics about cache contents
- **Data Export**: Export cache data in JSON or CSV formats
- **Pagination**: Browse large datasets efficiently

## Usage

### Interactive Mode

Start the interactive browser:

```bash
npm run cache
# or
node bin/cache-browser.mjs
```

### Quick Commands

Run specific commands without entering interactive mode:

```bash
# Show cache statistics
node bin/cache-browser.mjs stats

# Search for domains
node bin/cache-browser.mjs search "example"

# List entries (paginated)
node bin/cache-browser.mjs list 1
```

## Available Commands

### Interactive Commands

1. **search <term>** - Search domains by name
   - Example: `search appleelqqa`
   - Supports partial matching
   - Shows up to 20 results with details

2. **list [page]** - List all entries (paginated)
   - Example: `list 1`, `list 2`
   - Shows 10 entries per page
   - Displays domain count and sample domains

3. **stats** - Show comprehensive cache statistics
   - Total entries and domains
   - Top domain types (.eth, .reverse, etc.)
   - Most common resolvers
   - Top domain owners

4. **view <hash>** - View detailed entry by hash
   - Example: `view 7e94f41a4473244c`
   - Shows complete JSON data for the entry

5. **filter <type>** - Filter domains by type
   - Example: `filter eth`, `filter reverse`
   - Shows domains ending with specified extension

6. **export <format>** - Export data
   - Formats: `json`, `csv`
   - Creates timestamped export files

7. **help** - Show command help

8. **quit** - Exit browser

## Cache Structure

The resolver cache contains:

- **435 cache entries** (as of current data)
- **4,350 total domains** (average 10 per entry)
- **Domain types**: .eth (3,207), .reverse (1,097), .xyz (41), others
- **Resolver information**: Address, events, text records
- **Ownership data**: Domain owners and registrants
- **Creation timestamps**: When domains were registered

## Sample Data

The cache includes various domain types:

- **Standard ENS domains**: `example.eth`
- **Reverse resolution**: `[hash].addr.reverse`
- **Alternative TLDs**: `.xyz`, `.wtf`, `.tech`
- **International domains**: Unicode characters supported

## Technical Details

- **File format**: JSON with nested domain objects
- **Hash keys**: 16-character hexadecimal identifiers
- **Performance**: Optimized for large datasets (4K+ domains)
- **Memory usage**: Loads entire cache into memory for fast access
- **Export formats**: JSON (complete data) and CSV (tabular format)

## Integration

The cache browser integrates with the ENS metadata tools ecosystem:

- **Prober tools**: Cache generated by `probe-multicall.js`
- **NPM scripts**: Available as `npm run cache`
- **Binary command**: `ens-cache-browser` when installed globally
- **Error checking**: Included in automated error detection

## Examples

### Find all .eth domains owned by a specific address

```bash
node bin/cache-browser.mjs search "0xd4416b13d2b3a9abae7acd5d6c2bbdbe25686401"
```

### Export all data for analysis

```bash
node bin/cache-browser.mjs export csv
```

### Get overview of cache contents

```bash
node bin/cache-browser.mjs stats
```

### Browse domains interactively

```bash
npm run cache
> search uniswap
> filter eth
> list 1
> quit
```
